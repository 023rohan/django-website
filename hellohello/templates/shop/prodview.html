{% extends 'shop/basic.html'%}
{% block title%} {{product.name}} -My awesome cart {% endblock %}
{% block body %} 
<div class="container">
    
<div class="row">
<div class="col-sm-4 ">
    <div class="row">
<img src="/media/{{product.image}}" alt="" height="350px" width="350px;">
</div>
<div class="row">
    <button class="btn btn-primary mx-3">BUY NOW</button>
    <button class="btn btn-primary">ADD TO CART</button>
</div>
</div>
<div class="col-sm-8 text-center">
{{product.name}}
<br>
<em>MRP. {{product.value}}</em>
<br>
<strong>CATEGORY {{product.category}}</strong>
<br>
{{product.desc}}
</div>
</div>
</div>

{% endblock %}
{% block js %}
<script>
    console.log("working")
    if(localStorage.getItem('cart') == null){
     var cart = {};
    }
    else{
    cart = JSON.parse(localStorage.getItem('cart'))
     document.getElementById('cart').innerHTML = Object.keys(cart).length
    }
   $('.cart').click(function(){
    console.log('clicked')
    var idstr = this.id.toString();
    console.log(idstr);
    if(cart[idstr] != undefined){
    cart[idstr] = cart[idstr]+1;
    }

    else{
   cart[idstr] = 1;
   }
   console.log(cart);
   localStorage.setItem('cart',JSON.stringify(cart));
   document.getElementById('cart').innerHTML = Object.keys(cart).length;

    });
    $('#popcart').popover();
    document.getElementById("popcart").setAttribute('data-content','<h6>cart welcome to the shopping cart of my page</h6>')
</script>
{% endblock %}